<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/scroll_event.css">
</head>
<body>
    <div class="nav-bar">
        <span class="navbar-brand">JSShop</span>
        <span class="navbar-brand">dad!!</span>
        <button>button</button>
        <div class="progress-bar"></div>
    </div>

    <div class="lorem" style="width: 200px; height: 100px; overflow-y: scroll; margin-top: 60px;">
            adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22
            adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22
            adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22
            adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22
            adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22
            adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22adfasdfjj22
        </div>

    <div style="height: 600px; background-color: grey;"></div>
    <div style="height: 600px; background-color: red;"></div>
    <div style="height: 600px; background-color: blue;"></div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script>
        
        // // 자바스크립트
        // window.addEventListener('scroll', function() {
        //     if(window.scrollY > 100){
        //         document.querySelector('.nav-bar').style.fontSize = '40px';
        //     } else {
        //         document.querySelector('.nav-bar').style.fontSize = ''; // 원래대로
        //     }
        // });

        // JQuery
        $(window).scroll(function() {
            if($(window).scrollTop() > 100){
                $('.nav-bar').css('font-size', '40px');
            } else {
                $('.nav-bar').css('font-size', ''); // 원래대로
            }

            // 전체 스크롤 가능한 거리
            const totalScrollable = document.documentElement.scrollHeight - window.innerHeight;
            
            // 현재 스크롤 위치
            const currentScroll = window.scrollY;
            
            // 진척도 계산 (0 ~ 100%)
            const progress = Math.min(100, Math.max(0, (currentScroll / totalScrollable) * 100));

            $('.progress-bar').css('width', progress + '%');
        });
        
        // div의 스크롤바 내린 양 + 눈에 보이는 div의 높이(100) == div의 실제 높이
        $('.lorem').on('scroll', function() {
            const lorem = document.querySelector('.lorem');
            let 스크롤양 = lorem.scrollTop;
            let 실제높이 = lorem.scrollHeight;
            let 높이 = lorem.clientHeight;

            // 오차범위 5px
            if(스크롤양 + 높이 == 실제높이){
                alert("와우 ㅋ");
            }
        });

        // document.querySelector('html').scrollHeight
        // document.querySelector('html').clientHeight
        // document.querySelector('html').scrollTop
        // window.scrollY();
    </script>
</body>
</html>